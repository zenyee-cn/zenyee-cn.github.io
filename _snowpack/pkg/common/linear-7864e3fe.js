function nt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function tt(t){let n=t,e=t;t.length===1&&(n=(a,o)=>t(a)-o,e=ni(t));function i(a,o,l,f){for(l==null&&(l=0),f==null&&(f=a.length);l<f;){const u=l+f>>>1;e(a[u],o)<0?l=u+1:f=u}return l}function r(a,o,l,f){for(l==null&&(l=0),f==null&&(f=a.length);l<f;){const u=l+f>>>1;e(a[u],o)>0?f=u:l=u+1}return l}function s(a,o,l,f){l==null&&(l=0),f==null&&(f=a.length);const u=i(a,o,l,f-1);return u>l&&n(a[u-1],o)>-n(a[u],o)?u-1:u}return{left:i,center:s,right:r}}function ni(t){return(n,e)=>nt(t(n),e)}function Et(t){return t===null?NaN:+t}function*ti(t,n){if(n===void 0)for(let e of t)e!=null&&(e=+e)>=e&&(yield e);else{let e=-1;for(let i of t)(i=n(i,++e,t))!=null&&(i=+i)>=i&&(yield i)}}const Tt=tt(nt),Rt=Tt.right,ei=Tt.left,ii=tt(Et).center;function ri(t,n){let e,i;if(n===void 0)for(const r of t)r!=null&&(e===void 0?r>=r&&(e=i=r):(e>r&&(e=r),i<r&&(i=r)));else{let r=-1;for(let s of t)(s=n(s,++r,t))!=null&&(e===void 0?s>=s&&(e=i=s):(e>s&&(e=s),i<s&&(i=s)))}return[e,i]}class V{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=e[r],a=n+s,o=Math.abs(n)<Math.abs(s)?n-(a-s):s-(a-n);o&&(e[i++]=o),n=a}return e[i]=n,this._n=i+1,this}valueOf(){const n=this._partials;let e=this._n,i,r,s,a=0;if(e>0){for(a=n[--e];e>0&&(i=a,r=n[--e],a=i+r,s=r-(a-i),!s););e>0&&(s<0&&n[e-1]<0||s>0&&n[e-1]>0)&&(r=s*2,i=a+r,r==i-a&&(a=i))}return a}}function si(t,n){const e=new V;if(n===void 0)for(let i of t)(i=+i)&&e.add(i);else{let i=-1;for(let r of t)(r=+n(r,++i,t))&&e.add(r)}return+e}function ai(t,n){const e=new V;let i=-1;return Float64Array.from(t,n===void 0?r=>e.add(+r||0):r=>e.add(+n(r,++i,t)||0))}var et=Math.sqrt(50),it=Math.sqrt(10),rt=Math.sqrt(2);function Lt(t,n,e){var i,r=-1,s,a,o;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((i=n<t)&&(s=t,t=n,n=s),(o=st(t,n,e))===0||!isFinite(o))return[];if(o>0){let l=Math.round(t/o),f=Math.round(n/o);for(l*o<t&&++l,f*o>n&&--f,a=new Array(s=f-l+1);++r<s;)a[r]=(l+r)*o}else{o=-o;let l=Math.round(t*o),f=Math.round(n*o);for(l/o<t&&++l,f/o>n&&--f,a=new Array(s=f-l+1);++r<s;)a[r]=(l+r)/o}return i&&a.reverse(),a}function st(t,n,e){var i=(n-t)/Math.max(0,e),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=et?10:s>=it?5:s>=rt?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=et?10:s>=it?5:s>=rt?2:1)}function jt(t,n,e){var i=Math.abs(n-t)/Math.max(0,e),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=et?r*=10:s>=it?r*=5:s>=rt&&(r*=2),n<t?-r:r}function oi(t,n){let e=0,i=0;if(n===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++e,i+=r);else{let r=-1;for(let s of t)(s=n(s,++r,t))!=null&&(s=+s)>=s&&(++e,i+=s)}if(e)return i/e}function*li(t){for(const n of t)yield*n}function fi(t){return Array.from(li(t))}function sn(t,n,e){t=+t,n=+n,e=(r=arguments.length)<2?(n=t,t=0,1):r<3?1:+e;for(var i=-1,r=Math.max(0,Math.ceil((n-t)/e))|0,s=new Array(r);++i<r;)s[i]=t+i*e;return s}function $n(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function at(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function un(){}var hn=.7,wn=1/hn,cn="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Z="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ui=/^#([0-9a-f]{3,8})$/,hi=new RegExp("^rgb\\("+[cn,cn,cn]+"\\)$"),ci=new RegExp("^rgb\\("+[Z,Z,Z]+"\\)$"),gi=new RegExp("^rgba\\("+[cn,cn,cn,bn]+"\\)$"),di=new RegExp("^rgba\\("+[Z,Z,Z,bn]+"\\)$"),mi=new RegExp("^hsl\\("+[bn,Z,Z]+"\\)$"),xi=new RegExp("^hsla\\("+[bn,Z,Z,bn]+"\\)$"),zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$n(un,gn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ft,formatHex:Ft,formatHsl:yi,formatRgb:Ct,toString:Ct});function Ft(){return this.rgb().formatHex()}function yi(){return Ut(this).formatHsl()}function Ct(){return this.rgb().formatRgb()}function gn(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=ui.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Ht(n):e===3?new D(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?En(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?En(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=hi.exec(t))?new D(n[1],n[2],n[3],1):(n=ci.exec(t))?new D(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=gi.exec(t))?En(n[1],n[2],n[3],n[4]):(n=di.exec(t))?En(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=mi.exec(t))?Gt(n[1],n[2]/100,n[3]/100,1):(n=xi.exec(t))?Gt(n[1],n[2]/100,n[3]/100,n[4]):zt.hasOwnProperty(t)?Ht(zt[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function Ht(t){return new D(t>>16&255,t>>8&255,t&255,1)}function En(t,n,e,i){return i<=0&&(t=n=e=NaN),new D(t,n,e,i)}function qt(t){return t instanceof un||(t=gn(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function _n(t,n,e,i){return arguments.length===1?qt(t):new D(t,n,e,i??1)}function D(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}$n(D,_n,at(un,{brighter:function(t){return t=t==null?wn:Math.pow(wn,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?hn:Math.pow(hn,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dt,formatHex:Dt,formatRgb:Ot,toString:Ot}));function Dt(){return"#"+ot(this.r)+ot(this.g)+ot(this.b)}function Ot(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function ot(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Gt(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new J(t,n,e,i)}function Ut(t){if(t instanceof J)return new J(t.h,t.s,t.l,t.opacity);if(t instanceof un||(t=gn(t)),!t)return new J;if(t instanceof J)return t;t=t.rgb();var n=t.r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),s=Math.max(n,e,i),a=NaN,o=s-r,l=(s+r)/2;return o?(n===s?a=(e-i)/o+(e<i)*6:e===s?a=(i-n)/o+2:a=(n-e)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new J(a,o,l,t.opacity)}function Xt(t,n,e,i){return arguments.length===1?Ut(t):new J(t,n,e,i??1)}function J(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}$n(J,Xt,at(un,{brighter:function(t){return t=t==null?wn:Math.pow(wn,t),new J(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?hn:Math.pow(hn,t),new J(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new D(lt(t>=240?t-240:t+120,r,i),lt(t,r,i),lt(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function lt(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function Yt(t,n,e,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*n+(4-6*s+3*a)*e+(1+3*t+3*s-3*a)*i+a*r)/6}function Bt(t){var n=t.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,o=i<n-1?t[i+2]:2*s-r;return Yt((e-i/n)*n,a,r,s,o)}}function Kt(t){var n=t.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),r=t[(i+n-1)%n],s=t[i%n],a=t[(i+1)%n],o=t[(i+2)%n];return Yt((e-i/n)*n,r,s,a,o)}}var Tn=t=>()=>t;function Vt(t,n){return function(e){return t+e*n}}function pi(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}function wi(t,n){var e=n-t;return e?Vt(t,e>180||e<-180?e-360*Math.round(e/360):e):Tn(isNaN(t)?n:t)}function bi(t){return(t=+t)==1?ft:function(n,e){return e-n?pi(n,e,t):Tn(isNaN(n)?e:n)}}function ft(t,n){var e=n-t;return e?Vt(t,e):Tn(isNaN(t)?n:t)}var ut=function t(n){var e=bi(n);function i(r,s){var a=e((r=_n(r)).r,(s=_n(s)).r),o=e(r.g,s.g),l=e(r.b,s.b),f=ft(r.opacity,s.opacity);return function(u){return r.r=a(u),r.g=o(u),r.b=l(u),r.opacity=f(u),r+""}}return i.gamma=t,i}(1);function Zt(t){return function(n){var e=n.length,i=new Array(e),r=new Array(e),s=new Array(e),a,o;for(a=0;a<e;++a)o=_n(n[a]),i[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return i=t(i),r=t(r),s=t(s),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=s(l),o+""}}}var _i=Zt(Bt),Mi=Zt(Kt);function ht(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,i=n.slice(),r;return function(s){for(r=0;r<e;++r)i[r]=t[r]*(1-s)+n[r]*s;return i}}function Jt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vi(t,n){return(Jt(n)?ht:Qt)(t,n)}function Qt(t,n){var e=n?n.length:0,i=t?Math.min(e,t.length):0,r=new Array(i),s=new Array(e),a;for(a=0;a<i;++a)r[a]=Rn(t[a],n[a]);for(;a<e;++a)s[a]=n[a];return function(o){for(a=0;a<i;++a)s[a]=r[a](o);return s}}function Wt(t,n){var e=new Date;return t=+t,n=+n,function(i){return e.setTime(t*(1-i)+n*i),e}}function Mn(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function ne(t,n){var e={},i={},r;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in t?e[r]=Rn(t[r],n[r]):i[r]=n[r];return function(s){for(r in e)i[r]=e[r](s);return i}}var ct=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gt=new RegExp(ct.source,"g");function ki(t){return function(){return t}}function Si(t){return function(n){return t(n)+""}}function te(t,n){var e=ct.lastIndex=gt.lastIndex=0,i,r,s,a=-1,o=[],l=[];for(t=t+"",n=n+"";(i=ct.exec(t))&&(r=gt.exec(n));)(s=r.index)>e&&(s=n.slice(e,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:Mn(i,r)})),e=gt.lastIndex;return e<n.length&&(s=n.slice(e),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Si(l[0].x):ki(n):(n=l.length,function(f){for(var u=0,h;u<n;++u)o[(h=l[u]).i]=h.x(f);return o.join("")})}function Rn(t,n){var e=typeof n,i;return n==null||e==="boolean"?Tn(n):(e==="number"?Mn:e==="string"?(i=gn(n))?(n=i,ut):te:n instanceof gn?ut:n instanceof Date?Wt:Jt(n)?ht:Array.isArray(n)?Qt:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?ne:Mn)(t,n)}function ee(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}const ie=Math.pow(2,-52),Ln=new Uint32Array(512);class jn{static from(n,e=$i,i=Ei){const r=n.length,s=new Float64Array(r*2);for(let a=0;a<r;a++){const o=n[a];s[2*a]=e(o),s[2*a+1]=i(o)}return new jn(s)}constructor(n){const e=n.length>>1;if(e>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;const i=Math.max(2*e-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:n,_hullPrev:e,_hullNext:i,_hullTri:r,_hullHash:s}=this,a=n.length>>1;let o=Infinity,l=Infinity,f=-Infinity,u=-Infinity;for(let y=0;y<a;y++){const x=n[2*y],M=n[2*y+1];x<o&&(o=x),M<l&&(l=M),x>f&&(f=x),M>u&&(u=M),this._ids[y]=y}const h=(o+f)/2,c=(l+u)/2;let g=Infinity,d,p,b;for(let y=0;y<a;y++){const x=dt(h,c,n[2*y],n[2*y+1]);x<g&&(d=y,g=x)}const w=n[2*d],k=n[2*d+1];g=Infinity;for(let y=0;y<a;y++){if(y===d)continue;const x=dt(w,k,n[2*y],n[2*y+1]);x<g&&x>0&&(p=y,g=x)}let m=n[2*p],E=n[2*p+1],S=Infinity;for(let y=0;y<a;y++){if(y===d||y===p)continue;const x=Pi(w,k,m,E,n[2*y],n[2*y+1]);x<S&&(b=y,S=x)}let T=n[2*b],X=n[2*b+1];if(S===Infinity){for(let M=0;M<a;M++)this._dists[M]=n[2*M]-n[0]||n[2*M+1]-n[1];dn(this._ids,this._dists,0,a-1);const y=new Uint32Array(a);let x=0;for(let M=0,_=-Infinity;M<a;M++){const N=this._ids[M];this._dists[N]>_&&(y[x++]=N,_=this._dists[N])}this.hull=y.subarray(0,x),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(zn(w,k,m,E,T,X)){const y=p,x=m,M=E;p=b,m=T,E=X,b=y,T=x,X=M}const F=Ii(w,k,m,E,T,X);this._cx=F.x,this._cy=F.y;for(let y=0;y<a;y++)this._dists[y]=dt(n[2*y],n[2*y+1],F.x,F.y);dn(this._ids,this._dists,0,a-1),this._hullStart=d;let q=3;i[d]=e[b]=p,i[p]=e[d]=b,i[b]=e[p]=d,r[d]=0,r[p]=1,r[b]=2,s.fill(-1),s[this._hashKey(w,k)]=d,s[this._hashKey(m,E)]=p,s[this._hashKey(T,X)]=b,this.trianglesLen=0,this._addTriangle(d,p,b,-1,-1,-1);for(let y=0,x,M;y<this._ids.length;y++){const _=this._ids[y],N=n[2*_],C=n[2*_+1];if(y>0&&Math.abs(N-x)<=ie&&Math.abs(C-M)<=ie||(x=N,M=C,_===d||_===p||_===b))continue;let R=0;for(let Wn=0,We=this._hashKey(N,C);Wn<this._hashSize&&(R=s[(We+Wn)%this._hashSize],!(R!==-1&&R!==i[R]));Wn++);R=e[R];let v=R,A;for(;A=i[v],!zn(N,C,n[2*v],n[2*v+1],n[2*A],n[2*A+1]);)if(v=A,v===R){v=-1;break}if(v===-1)continue;let L=this._addTriangle(v,_,i[v],-1,-1,r[v]);r[_]=this._legalize(L+2),r[v]=L,q++;let K=i[v];for(;A=i[K],zn(N,C,n[2*K],n[2*K+1],n[2*A],n[2*A+1]);)L=this._addTriangle(K,_,A,r[_],-1,r[K]),r[_]=this._legalize(L+2),i[K]=K,q--,K=A;if(v===R)for(;A=e[v],zn(N,C,n[2*A],n[2*A+1],n[2*v],n[2*v+1]);)L=this._addTriangle(A,_,v,-1,r[v],r[A]),this._legalize(L+2),r[A]=L,i[v]=v,q--,v=A;this._hullStart=e[_]=v,i[v]=e[K]=_,i[_]=K,s[this._hashKey(N,C)]=_,s[this._hashKey(n[2*v],n[2*v+1])]=v}this.hull=new Uint32Array(q);for(let y=0,x=this._hullStart;y<q;y++)this.hull[y]=x,x=i[x];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,e){return Math.floor(Ni(n-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:e,_halfedges:i,coords:r}=this;let s=0,a=0;for(;;){const o=i[n],l=n-n%3;if(a=l+(n+2)%3,o===-1){if(s===0)break;n=Ln[--s];continue}const f=o-o%3,u=l+(n+1)%3,h=f+(o+2)%3,c=e[a],g=e[n],d=e[u],p=e[h];if(Ai(r[2*c],r[2*c+1],r[2*g],r[2*g+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[n]=p,e[o]=c;const w=i[h];if(w===-1){let m=this._hullStart;do{if(this._hullTri[m]===h){this._hullTri[m]=n;break}m=this._hullPrev[m]}while(m!==this._hullStart)}this._link(n,w),this._link(o,i[a]),this._link(a,h);const k=f+(o+1)%3;s<Ln.length&&(Ln[s++]=k)}else{if(s===0)break;n=Ln[--s]}}return a}_link(n,e){this._halfedges[n]=e,e!==-1&&(this._halfedges[e]=n)}_addTriangle(n,e,i,r,s,a){const o=this.trianglesLen;return this._triangles[o]=n,this._triangles[o+1]=e,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function Ni(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}function dt(t,n,e,i){const r=t-e,s=n-i;return r*r+s*s}function mt(t,n,e,i,r,s){const a=(i-n)*(r-t),o=(e-t)*(s-n);return Math.abs(a-o)>=33306690738754716e-32*Math.abs(a+o)?a-o:0}function zn(t,n,e,i,r,s){return(mt(r,s,t,n,e,i)||mt(t,n,e,i,r,s)||mt(e,i,r,s,t,n))<0}function Ai(t,n,e,i,r,s,a,o){const l=t-a,f=n-o,u=e-a,h=i-o,c=r-a,g=s-o,d=l*l+f*f,p=u*u+h*h,b=c*c+g*g;return l*(h*b-p*g)-f*(u*b-p*c)+d*(u*g-h*c)<0}function Pi(t,n,e,i,r,s){const a=e-t,o=i-n,l=r-t,f=s-n,u=a*a+o*o,h=l*l+f*f,c=.5/(a*f-o*l),g=(f*u-o*h)*c,d=(a*h-l*u)*c;return g*g+d*d}function Ii(t,n,e,i,r,s){const a=e-t,o=i-n,l=r-t,f=s-n,u=a*a+o*o,h=l*l+f*f,c=.5/(a*f-o*l),g=t+(f*u-o*h)*c,d=n+(a*h-l*u)*c;return{x:g,y:d}}function dn(t,n,e,i){if(i-e<=20)for(let r=e+1;r<=i;r++){const s=t[r],a=n[s];let o=r-1;for(;o>=e&&n[t[o]]>a;)t[o+1]=t[o--];t[o+1]=s}else{const r=e+i>>1;let s=e+1,a=i;vn(t,r,s),n[t[e]]>n[t[i]]&&vn(t,e,i),n[t[s]]>n[t[i]]&&vn(t,s,i),n[t[e]]>n[t[s]]&&vn(t,e,s);const o=t[s],l=n[o];for(;;){do s++;while(n[t[s]]<l);do a--;while(n[t[a]]>l);if(a<s)break;vn(t,s,a)}t[e+1]=t[a],t[a]=o,i-s+1>=a-e?(dn(t,n,s,i),dn(t,n,e,a-1)):(dn(t,n,e,a-1),dn(t,n,s,i))}}function vn(t,n,e){const i=t[n];t[n]=t[e],t[e]=i}function $i(t){return t[0]}function Ei(t){return t[1]}const re=1e-6;class an{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,e){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,e){this._+=`L${this._x1=+n},${this._y1=+e}`}arc(n,e,i){n=+n,e=+e,i=+i;const r=n+i,s=e;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>re||Math.abs(this._y1-s)>re)&&(this._+="L"+r+","+s),!!i&&(this._+=`A${i},${i},0,1,1,${n-i},${e}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(n,e,i,r){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class xt{constructor(){this._=[]}moveTo(n,e){this._.push([n,e])}closePath(){this._.push(this._[0].slice())}lineTo(n,e){this._.push([n,e])}value(){return this._.length?this._:null}}class se{constructor(n,[e,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(e=+e))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=r,this.xmin=e,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:e,triangles:i},vectors:r}=this,s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let g=0,d=0,p=i.length,b,w;g<p;g+=3,d+=2){const k=i[g]*2,m=i[g+1]*2,E=i[g+2]*2,S=n[k],T=n[k+1],X=n[m],F=n[m+1],q=n[E],y=n[E+1],x=X-S,M=F-T,_=q-S,N=y-T,C=x*x+M*M,R=_*_+N*N,v=(x*N-M*_)*2;if(!v)b=(S+q)/2-1e8*N,w=(T+y)/2+1e8*_;else if(Math.abs(v)<1e-8)b=(S+q)/2,w=(T+y)/2;else{const A=1/v;b=S+(N*C-M*R)*A,w=T+(x*R-_*C)*A}s[d]=b,s[d+1]=w}let a=e[e.length-1],o,l=a*4,f,u=n[2*a],h,c=n[2*a+1];r.fill(0);for(let g=0;g<e.length;++g)a=e[g],o=l,f=u,h=c,l=a*4,u=n[2*a],c=n[2*a+1],r[o+2]=r[l]=h-c,r[o+3]=r[l+1]=u-f}render(n){const e=n==null?n=new an:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let u=0,h=i.length;u<h;++u){const c=i[u];if(c<u)continue;const g=Math.floor(u/3)*2,d=Math.floor(c/3)*2,p=a[g],b=a[g+1],w=a[d],k=a[d+1];this._renderSegment(p,b,w,k,n)}let l,f=s[s.length-1];for(let u=0;u<s.length;++u){l=f,f=s[u];const h=Math.floor(r[f]/3)*2,c=a[h],g=a[h+1],d=l*4,p=this._project(c,g,o[d+2],o[d+3]);p&&this._renderSegment(c,g,p[0],p[1],n)}return e&&e.value()}renderBounds(n){const e=n==null?n=new an:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(n,e){const i=e==null?e=new an:void 0,r=this._clip(n);if(r===null||!r.length)return;e.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&e.lineTo(r[a],r[a+1]);return e.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let e=0,i=n.length/2;e<i;++e){const r=this.cellPolygon(e);r&&(r.index=e,yield r)}}cellPolygon(n){const e=new xt;return this.renderCell(n,e),e.value()}_renderSegment(n,e,i,r,s){let a;const o=this._regioncode(n,e),l=this._regioncode(i,r);o===0&&l===0?(s.moveTo(n,e),s.lineTo(i,r)):(a=this._clipSegment(n,e,i,r,o,l))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(n,e,i){return e=+e,e!==e||(i=+i,i!==i)?!1:this.delaunay._step(n,e,i)===n}*neighbors(n){const e=this._clip(n);if(e)for(const i of this.delaunay.neighbors(n)){const r=this._clip(i);if(r)n:for(let s=0,a=e.length;s<a;s+=2)for(let o=0,l=r.length;o<l;o+=2)if(e[s]==r[o]&&e[s+1]==r[o+1]&&e[(s+2)%a]==r[(o+l-2)%l]&&e[(s+3)%a]==r[(o+l-1)%l]){yield i;break n}}}_cell(n){const{circumcenters:e,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,a=i[n];if(a===-1)return null;const o=[];let l=a;do{const f=Math.floor(l/3);if(o.push(e[f*2],e[f*2+1]),l=l%3==2?l-2:l+1,s[l]!==n)break;l=r[l]}while(l!==a&&l!==-1);return o}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(n);if(e===null)return null;const{vectors:i}=this,r=n*4;return i[r]||i[r+1]?this._clipInfinite(n,e,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(n,e)}_clipFinite(n,e){const i=e.length;let r=null,s,a,o=e[i-2],l=e[i-1],f,u=this._regioncode(o,l),h,c;for(let g=0;g<i;g+=2)if(s=o,a=l,o=e[g],l=e[g+1],f=u,u=this._regioncode(o,l),f===0&&u===0)h=c,c=0,r?r.push(o,l):r=[o,l];else{let d,p,b,w,k;if(f===0){if((d=this._clipSegment(s,a,o,l,f,u))===null)continue;[p,b,w,k]=d}else{if((d=this._clipSegment(o,l,s,a,u,f))===null)continue;[w,k,p,b]=d,h=c,c=this._edgecode(p,b),h&&c&&this._edge(n,h,c,r,r.length),r?r.push(p,b):r=[p,b]}h=c,c=this._edgecode(w,k),h&&c&&this._edge(n,h,c,r,r.length),r?r.push(w,k):r=[w,k]}if(r)h=c,c=this._edgecode(r[0],r[1]),h&&c&&this._edge(n,h,c,r,r.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(n,e,i,r,s,a){for(;;){if(s===0&&a===0)return[n,e,i,r];if(s&a)return null;let o,l,f=s||a;f&8?(o=n+(i-n)*(this.ymax-e)/(r-e),l=this.ymax):f&4?(o=n+(i-n)*(this.ymin-e)/(r-e),l=this.ymin):f&2?(l=e+(r-e)*(this.xmax-n)/(i-n),o=this.xmax):(l=e+(r-e)*(this.xmin-n)/(i-n),o=this.xmin),s?(n=o,e=l,s=this._regioncode(n,e)):(i=o,r=l,a=this._regioncode(i,r))}}_clipInfinite(n,e,i,r,s,a){let o=Array.from(e),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(l[0],l[1]),o=this._clipFinite(n,o))for(let f=0,u=o.length,h,c=this._edgecode(o[u-2],o[u-1]);f<u;f+=2)h=c,c=this._edgecode(o[f],o[f+1]),h&&c&&(f=this._edge(n,h,c,o,f),u=o.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(n,e,i,r,s){for(;e!==i;){let a,o;switch(e){case 5:e=4;continue;case 4:e=6,a=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,a=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,a=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,a=this.xmin,o=this.ymin;break}(r[s]!==a||r[s+1]!==o)&&this.contains(n,a,o)&&(r.splice(s,0,a,o),s+=2)}if(r.length>4)for(let a=0;a<r.length;a+=2){const o=(a+2)%r.length,l=(a+4)%r.length;(r[a]===r[o]&&r[o]===r[l]||r[a+1]===r[o+1]&&r[o+1]===r[l+1])&&(r.splice(o,2),a-=2)}return s}_project(n,e,i,r){let s=Infinity,a,o,l;if(r<0){if(e<=this.ymin)return null;(a=(this.ymin-e)/r)<s&&(l=this.ymin,o=n+(s=a)*i)}else if(r>0){if(e>=this.ymax)return null;(a=(this.ymax-e)/r)<s&&(l=this.ymax,o=n+(s=a)*i)}if(i>0){if(n>=this.xmax)return null;(a=(this.xmax-n)/i)<s&&(o=this.xmax,l=e+(s=a)*r)}else if(i<0){if(n<=this.xmin)return null;(a=(this.xmin-n)/i)<s&&(o=this.xmin,l=e+(s=a)*r)}return[o,l]}_edgecode(n,e){return(n===this.xmin?1:n===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(n,e){return(n<this.xmin?1:n>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const Ti=2*Math.PI,mn=Math.pow;function Ri(t){return t[0]}function Li(t){return t[1]}function ji(t){const{triangles:n,coords:e}=t;for(let i=0;i<n.length;i+=3){const r=2*n[i],s=2*n[i+1],a=2*n[i+2];if((e[a]-e[r])*(e[s+1]-e[r+1])-(e[s]-e[r])*(e[a+1]-e[r+1])>1e-10)return!1}return!0}function zi(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class yt{static from(n,e=Ri,i=Li,r){return new yt("length"in n?Fi(n,e,i,r):Float64Array.from(Ci(n,e,i,r)))}constructor(n){this._delaunator=new jn(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,e=this.points;if(n.hull&&n.hull.length>2&&ji(n)){this.collinear=Int32Array.from({length:e.length/2},(c,g)=>g).sort((c,g)=>e[2*c]-e[2*g]||e[2*c+1]-e[2*g+1]);const l=this.collinear[0],f=this.collinear[this.collinear.length-1],u=[e[2*l],e[2*l+1],e[2*f],e[2*f+1]],h=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let c=0,g=e.length/2;c<g;++c){const d=zi(e[2*c],e[2*c+1],h);e[2*c]=d[0],e[2*c+1]=d[1]}this._delaunator=new jn(e)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,f=i.length;l<f;++l){const u=s[l%3==2?l-2:l+1];(i[l]===-1||a[u]===-1)&&(a[u]=l)}for(let l=0,f=r.length;l<f;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],a[r[0]]=1,r.length===2&&(a[r[1]]=0))}voronoi(n){return new se(this,n)}*neighbors(n){const{inedges:e,hull:i,_hullIndex:r,halfedges:s,triangles:a,collinear:o}=this;if(o){const h=o.indexOf(n);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const l=e[n];if(l===-1)return;let f=l,u=-1;do{if(yield u=a[f],f=f%3==2?f-2:f+1,a[f]!==n)return;if(f=s[f],f===-1){const h=i[(r[n]+1)%i.length];h!==u&&(yield h);return}}while(f!==l)}find(n,e,i=0){if(n=+n,n!==n||(e=+e,e!==e))return-1;const r=i;let s;for(;(s=this._step(i,n,e))>=0&&s!==i&&s!==r;)i=s;return s}_step(n,e,i){const{inedges:r,hull:s,_hullIndex:a,halfedges:o,triangles:l,points:f}=this;if(r[n]===-1||!f.length)return(n+1)%(f.length>>1);let u=n,h=mn(e-f[n*2],2)+mn(i-f[n*2+1],2);const c=r[n];let g=c;do{let d=l[g];const p=mn(e-f[d*2],2)+mn(i-f[d*2+1],2);if(p<h&&(h=p,u=d),g=g%3==2?g-2:g+1,l[g]!==n)break;if(g=o[g],g===-1){if(g=s[(a[n]+1)%s.length],g!==d&&mn(e-f[g*2],2)+mn(i-f[g*2+1],2)<h)return g;break}}while(g!==c);return u}render(n){const e=n==null?n=new an:void 0,{points:i,halfedges:r,triangles:s}=this;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l<a)continue;const f=s[a]*2,u=s[l]*2;n.moveTo(i[f],i[f+1]),n.lineTo(i[u],i[u+1])}return this.renderHull(n),e&&e.value()}renderPoints(n,e=2){const i=n==null?n=new an:void 0,{points:r}=this;for(let s=0,a=r.length;s<a;s+=2){const o=r[s],l=r[s+1];n.moveTo(o+e,l),n.arc(o,l,e,0,Ti)}return i&&i.value()}renderHull(n){const e=n==null?n=new an:void 0,{hull:i,points:r}=this,s=i[0]*2,a=i.length;n.moveTo(r[s],r[s+1]);for(let o=1;o<a;++o){const l=2*i[o];n.lineTo(r[l],r[l+1])}return n.closePath(),e&&e.value()}hullPolygon(){const n=new xt;return this.renderHull(n),n.value()}renderTriangle(n,e){const i=e==null?e=new an:void 0,{points:r,triangles:s}=this,a=s[n*=3]*2,o=s[n+1]*2,l=s[n+2]*2;return e.moveTo(r[a],r[a+1]),e.lineTo(r[o],r[o+1]),e.lineTo(r[l],r[l+1]),e.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:n}=this;for(let e=0,i=n.length/3;e<i;++e)yield this.trianglePolygon(e)}trianglePolygon(n){const e=new xt;return this.renderTriangle(n,e),e.value()}}function Fi(t,n,e,i){const r=t.length,s=new Float64Array(r*2);for(let a=0;a<r;++a){const o=t[a];s[a*2]=n.call(i,o,a,t),s[a*2+1]=e.call(i,o,a,t)}return s}function*Ci(t,n,e,i){let r=0;for(const s of t)yield n.call(i,s,r,t),yield e.call(i,s,r,t),++r}function Hi(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Fn(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,i=t.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+t.slice(e+1)]}function xn(t){return t=Fn(Math.abs(t)),t?t[1]:NaN}function qi(t,n){return function(e,i){for(var r=e.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}}function Di(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var Oi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kn(t){if(!(n=Oi.exec(t)))throw new Error("invalid format: "+t);var n;return new Cn({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}kn.prototype=Cn.prototype;function Cn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Cn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gi(t){n:for(var n=t.length,e=1,i=-1,r;e<n;++e)switch(t[e]){case".":i=r=e;break;case"0":i===0&&(i=e),r=e;break;default:if(!+t[e])break n;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var ae;function Ui(t,n){var e=Fn(t,n);if(!e)return t+"";var i=e[0],r=e[1],s=r-(ae=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Fn(t,Math.max(0,n+s-1))[0]}function oe(t,n){var e=Fn(t,n);if(!e)return t+"";var i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var le={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Hi,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>oe(t*100,n),r:oe,s:Ui,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fe(t){return t}var ue=Array.prototype.map,he=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ce(t){var n=t.grouping===void 0||t.thousands===void 0?fe:qi(ue.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?fe:Di(ue.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function f(h){h=kn(h);var c=h.fill,g=h.align,d=h.sign,p=h.symbol,b=h.zero,w=h.width,k=h.comma,m=h.precision,E=h.trim,S=h.type;S==="n"?(k=!0,S="g"):le[S]||(m===void 0&&(m=12),E=!0,S="g"),(b||c==="0"&&g==="=")&&(b=!0,c="0",g="=");var T=p==="$"?e:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",X=p==="$"?i:/[%p]/.test(S)?a:"",F=le[S],q=/[defgprs%]/.test(S);m=m===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function y(x){var M=T,_=X,N,C,R;if(S==="c")_=F(x)+_,x="";else{x=+x;var v=x<0||1/x<0;if(x=isNaN(x)?l:F(Math.abs(x),m),E&&(x=Gi(x)),v&&+x==0&&d!=="+"&&(v=!1),M=(v?d==="("?d:o:d==="-"||d==="("?"":d)+M,_=(S==="s"?he[8+ae/3]:"")+_+(v&&d==="("?")":""),q){for(N=-1,C=x.length;++N<C;)if(R=x.charCodeAt(N),48>R||R>57){_=(R===46?r+x.slice(N+1):x.slice(N))+_,x=x.slice(0,N);break}}}k&&!b&&(x=n(x,Infinity));var A=M.length+x.length+_.length,L=A<w?new Array(w-A+1).join(c):"";switch(k&&b&&(x=n(L+x,L.length?w-_.length:Infinity),L=""),g){case"<":x=M+x+_+L;break;case"=":x=M+L+x+_;break;case"^":x=L.slice(0,A=L.length>>1)+M+x+_+L.slice(A);break;default:x=L+M+x+_;break}return s(x)}return y.toString=function(){return h+""},y}function u(h,c){var g=f((h=kn(h),h.type="f",h)),d=Math.max(-8,Math.min(8,Math.floor(xn(c)/3)))*3,p=Math.pow(10,-d),b=he[8+d/3];return function(w){return g(p*w)+b}}return{format:f,formatPrefix:u}}var Hn,pt,wt;ge({thousands:",",grouping:[3],currency:["$",""]});function ge(t){return Hn=ce(t),pt=Hn.format,wt=Hn.formatPrefix,Hn}function de(t){return Math.max(0,-xn(Math.abs(t)))}function me(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xn(n)/3)))*3-xn(Math.abs(t)))}function xe(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,xn(n)-xn(t))+1}var H=1e-6,bt=1e-12,Y=Math.PI,Sn=Y/2,qn=Y/4,Nn=Y*2,en=180/Y,j=Y/180,W=Math.abs,Xi=Math.atan,on=Math.atan2,z=Math.cos,Dn=Math.ceil,Yi=Math.exp,Bi=Math.hypot,Ki=Math.log,Vi=Math.pow,I=Math.sin,ye=Math.sign||function(t){return t>0?1:t<0?-1:0},An=Math.sqrt,Zi=Math.tan;function Ji(t){return t>1?0:t<-1?Y:Math.acos(t)}function On(t){return t>1?Sn:t<-1?-Sn:Math.asin(t)}function pe(t){return(t=I(t/2))*t}function B(){}function Gn(t,n){t&&be.hasOwnProperty(t.type)&&be[t.type](t,n)}var we={Feature:function(t,n){Gn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,r=e.length;++i<r;)Gn(e[i].geometry,n)}},be={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)t=e[i],n.point(t[0],t[1],t[2])},LineString:function(t,n){_t(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)_t(e[i],n,0)},Polygon:function(t,n){_e(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)_e(e[i],n)},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,r=e.length;++i<r;)Gn(e[i],n)}};function _t(t,n,e){var i=-1,r=t.length-e,s;for(n.lineStart();++i<r;)s=t[i],n.point(s[0],s[1],s[2]);n.lineEnd()}function _e(t,n){var e=-1,i=t.length;for(n.polygonStart();++e<i;)_t(t[e],n,1);n.polygonEnd()}function Un(t,n){t&&we.hasOwnProperty(t.type)?we[t.type](t,n):Gn(t,n)}var Xn=new V,Yn=new V,Me,ve,Mt,vt,kt,Q={point:B,lineStart:B,lineEnd:B,polygonStart:function(){Xn=new V,Q.lineStart=Qi,Q.lineEnd=Wi},polygonEnd:function(){var t=+Xn;Yn.add(t<0?Nn+t:t),this.lineStart=this.lineEnd=this.point=B},sphere:function(){Yn.add(Nn)}};function Qi(){Q.point=nr}function Wi(){ke(Me,ve)}function nr(t,n){Q.point=ke,Me=t,ve=n,t*=j,n*=j,Mt=t,vt=z(n=n/2+qn),kt=I(n)}function ke(t,n){t*=j,n*=j,n=n/2+qn;var e=t-Mt,i=e>=0?1:-1,r=i*e,s=z(n),a=I(n),o=kt*a,l=vt*s+o*z(r),f=o*i*I(r);Xn.add(on(f,l)),Mt=t,vt=s,kt=a}function tr(t){return Yn=new V,Un(t,Q),Yn*2}function Se(t){return[on(t[1],t[0]),On(t[2])]}function Bn(t){var n=t[0],e=t[1],i=z(e);return[i*z(n),i*I(n),I(e)]}function er(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Pn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ir(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function rr(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Kn(t){var n=An(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var P,O,$,G,ln,Ne,Ae,yn,In,rn,nn,tn={point:St,lineStart:Ie,lineEnd:$e,polygonStart:function(){tn.point=Ee,tn.lineStart=sr,tn.lineEnd=ar,In=new V,Q.polygonStart()},polygonEnd:function(){Q.polygonEnd(),tn.point=St,tn.lineStart=Ie,tn.lineEnd=$e,Xn<0?(P=-($=180),O=-(G=90)):In>H?G=90:In<-H&&(O=-90),nn[0]=P,nn[1]=$},sphere:function(){P=-($=180),O=-(G=90)}};function St(t,n){rn.push(nn=[P=t,$=t]),n<O&&(O=n),n>G&&(G=n)}function Pe(t,n){var e=Bn([t*j,n*j]);if(yn){var i=Pn(yn,e),r=[i[1],-i[0],0],s=Pn(r,i);Kn(s),s=Se(s);var a=t-ln,o=a>0?1:-1,l=s[0]*en*o,f,u=W(a)>180;u^(o*ln<l&&l<o*t)?(f=s[1]*en,f>G&&(G=f)):(l=(l+360)%360-180,u^(o*ln<l&&l<o*t)?(f=-s[1]*en,f<O&&(O=f)):(n<O&&(O=n),n>G&&(G=n))),u?t<ln?U(P,t)>U(P,$)&&($=t):U(t,$)>U(P,$)&&(P=t):$>=P?(t<P&&(P=t),t>$&&($=t)):t>ln?U(P,t)>U(P,$)&&($=t):U(t,$)>U(P,$)&&(P=t)}else rn.push(nn=[P=t,$=t]);n<O&&(O=n),n>G&&(G=n),yn=e,ln=t}function Ie(){tn.point=Pe}function $e(){nn[0]=P,nn[1]=$,tn.point=St,yn=null}function Ee(t,n){if(yn){var e=t-ln;In.add(W(e)>180?e+(e>0?360:-360):e)}else Ne=t,Ae=n;Q.point(t,n),Pe(t,n)}function sr(){Q.lineStart()}function ar(){Ee(Ne,Ae),Q.lineEnd(),W(In)>H&&(P=-($=180)),nn[0]=P,nn[1]=$,yn=null}function U(t,n){return(n-=t)<0?n+360:n}function or(t,n){return t[0]-n[0]}function Te(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function lr(t){var n,e,i,r,s,a,o;if(G=$=-(P=O=Infinity),rn=[],Un(t,tn),e=rn.length){for(rn.sort(or),n=1,i=rn[0],s=[i];n<e;++n)r=rn[n],Te(i,r[0])||Te(i,r[1])?(U(i[0],r[1])>U(i[0],i[1])&&(i[1]=r[1]),U(r[0],i[1])>U(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(a=-Infinity,e=s.length-1,n=0,i=s[e];n<=e;i=r,++n)r=s[n],(o=U(i[1],r[0]))>a&&(a=o,P=r[0],$=i[1])}return rn=nn=null,P===Infinity||O===Infinity?[[NaN,NaN],[NaN,NaN]]:[[P,O],[$,G]]}function Nt(t){return W(t[0])<=Y?t[0]:ye(t[0])*((W(t[0])+Y)%Nn-Y)}function Re(t,n){var e=Nt(n),i=n[1],r=I(i),s=[I(e),-z(e),0],a=0,o=0,l=new V;r===1?i=Sn+H:r===-1&&(i=-Sn-H);for(var f=0,u=t.length;f<u;++f)if(!!(c=(h=t[f]).length))for(var h,c,g=h[c-1],d=Nt(g),p=g[1]/2+qn,b=I(p),w=z(p),k=0;k<c;++k,d=E,b=T,w=X,g=m){var m=h[k],E=Nt(m),S=m[1]/2+qn,T=I(S),X=z(S),F=E-d,q=F>=0?1:-1,y=q*F,x=y>Y,M=b*T;if(l.add(on(M*q*I(y),w*X+M*z(y))),a+=x?F+q*Nn:F,x^d>=e^E>=e){var _=Pn(Bn(g),Bn(m));Kn(_);var N=Pn(s,_);Kn(N);var C=(x^F>=0?-1:1)*On(N[2]);(i>C||i===C&&(_[0]||_[1]))&&(o+=x^F>=0?1:-1)}}return(a<-H||a<H&&l<-bt)^o&1}var At,Pt,Vn,Zn,pn={sphere:B,point:B,lineStart:fr,lineEnd:B,polygonStart:B,polygonEnd:B};function fr(){pn.point=hr,pn.lineEnd=ur}function ur(){pn.point=pn.lineEnd=B}function hr(t,n){t*=j,n*=j,Pt=t,Vn=I(n),Zn=z(n),pn.point=cr}function cr(t,n){t*=j,n*=j;var e=I(n),i=z(n),r=W(t-Pt),s=z(r),a=I(r),o=i*a,l=Zn*e-Vn*i*s,f=Vn*e+Zn*i*s;At.add(on(An(o*o+l*l),f)),Pt=t,Vn=e,Zn=i}function Le(t){return At=new V,Un(t,pn),+At}var It=[null,null],gr={type:"LineString",coordinates:It};function Jn(t,n){return It[0]=t,It[1]=n,Le(gr)}var je={Feature:function(t,n){return Qn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,r=e.length;++i<r;)if(Qn(e[i].geometry,n))return!0;return!1}},ze={Sphere:function(){return!0},Point:function(t,n){return Fe(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)if(Fe(e[i],n))return!0;return!1},LineString:function(t,n){return Ce(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)if(Ce(e[i],n))return!0;return!1},Polygon:function(t,n){return He(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)if(He(e[i],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,r=e.length;++i<r;)if(Qn(e[i],n))return!0;return!1}};function Qn(t,n){return t&&ze.hasOwnProperty(t.type)?ze[t.type](t,n):!1}function Fe(t,n){return Jn(t,n)===0}function Ce(t,n){for(var e,i,r,s=0,a=t.length;s<a;s++){if(i=Jn(t[s],n),i===0||s>0&&(r=Jn(t[s],t[s-1]),r>0&&e<=r&&i<=r&&(e+i-r)*(1-Math.pow((e-i)/r,2))<bt*r))return!0;e=i}return!1}function He(t,n){return!!Re(t.map(dr),qe(n))}function dr(t){return t=t.map(qe),t.pop(),t}function qe(t){return[t[0]*j,t[1]*j]}function mr(t,n){return(t&&je.hasOwnProperty(t.type)?je[t.type]:Qn)(t,n)}function De(t,n,e){var i=sn(t,n-H,e).concat(n);return function(r){return i.map(function(s){return[r,s]})}}function Oe(t,n,e){var i=sn(t,n-H,e).concat(n);return function(r){return i.map(function(s){return[s,r]})}}function Ge(){var t,n,e,i,r,s,a,o,l=10,f=l,u=90,h=360,c,g,d,p,b=2.5;function w(){return{type:"MultiLineString",coordinates:k()}}function k(){return sn(Dn(i/u)*u,e,u).map(d).concat(sn(Dn(o/h)*h,a,h).map(p)).concat(sn(Dn(n/l)*l,t,l).filter(function(m){return W(m%u)>H}).map(c)).concat(sn(Dn(s/f)*f,r,f).filter(function(m){return W(m%h)>H}).map(g))}return w.lines=function(){return k().map(function(m){return{type:"LineString",coordinates:m}})},w.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(p(a).slice(1),d(e).reverse().slice(1),p(o).reverse().slice(1))]}},w.extent=function(m){return arguments.length?w.extentMajor(m).extentMinor(m):w.extentMinor()},w.extentMajor=function(m){return arguments.length?(i=+m[0][0],e=+m[1][0],o=+m[0][1],a=+m[1][1],i>e&&(m=i,i=e,e=m),o>a&&(m=o,o=a,a=m),w.precision(b)):[[i,o],[e,a]]},w.extentMinor=function(m){return arguments.length?(n=+m[0][0],t=+m[1][0],s=+m[0][1],r=+m[1][1],n>t&&(m=n,n=t,t=m),s>r&&(m=s,s=r,r=m),w.precision(b)):[[n,s],[t,r]]},w.step=function(m){return arguments.length?w.stepMajor(m).stepMinor(m):w.stepMinor()},w.stepMajor=function(m){return arguments.length?(u=+m[0],h=+m[1],w):[u,h]},w.stepMinor=function(m){return arguments.length?(l=+m[0],f=+m[1],w):[l,f]},w.precision=function(m){return arguments.length?(b=+m,c=De(s,r,90),g=Oe(n,t,b),d=De(o,a,90),p=Oe(i,e,b),w):b},w.extentMajor([[-180,-90+H],[180,90-H]]).extentMinor([[-180,-80-H],[180,80+H]])}function xr(){return Ge()()}function yr(t,n){var e=t[0]*j,i=t[1]*j,r=n[0]*j,s=n[1]*j,a=z(i),o=I(i),l=z(s),f=I(s),u=a*z(e),h=a*I(e),c=l*z(r),g=l*I(r),d=2*On(An(pe(s-i)+a*l*pe(r-e))),p=I(d),b=d?function(w){var k=I(w*=d)/p,m=I(d-w)/p,E=m*u+k*c,S=m*h+k*g,T=m*o+k*f;return[on(S,E)*en,on(T,An(E*E+S*S))*en]}:function(){return[e*en,i*en]};return b.distance=d,b}function Ue(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function pr(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}function wr(t){return function(){return t}}function Xe(t){return+t}var Ye=[0,1];function fn(t){return t}function $t(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:wr(isNaN(n)?NaN:.5)}function br(t,n){var e;return t>n&&(e=t,t=n,n=e),function(i){return Math.max(t,Math.min(n,i))}}function _r(t,n,e){var i=t[0],r=t[1],s=n[0],a=n[1];return r<i?(i=$t(r,i),s=e(a,s)):(i=$t(i,r),s=e(s,a)),function(o){return s(i(o))}}function Mr(t,n,e){var i=Math.min(t.length,n.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<i;)r[a]=$t(t[a],t[a+1]),s[a]=e(n[a],n[a+1]);return function(o){var l=Rt(t,o,1,i)-1;return s[l](r[l](o))}}function Be(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ke(){var t=Ye,n=Ye,e=Rn,i,r,s,a=fn,o,l,f;function u(){var c=Math.min(t.length,n.length);return a!==fn&&(a=br(t[0],t[c-1])),o=c>2?Mr:_r,l=f=null,h}function h(c){return c==null||isNaN(c=+c)?s:(l||(l=o(t.map(i),n,e)))(i(a(c)))}return h.invert=function(c){return a(r((f||(f=o(n,t.map(i),Mn)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Xe),u()):t.slice()},h.range=function(c){return arguments.length?(n=Array.from(c),u()):n.slice()},h.rangeRound=function(c){return n=Array.from(c),e=ee,u()},h.clamp=function(c){return arguments.length?(a=c?!0:fn,u()):a!==fn},h.interpolate=function(c){return arguments.length?(e=c,u()):e},h.unknown=function(c){return arguments.length?(s=c,h):s},function(c,g){return i=c,r=g,u()}}function Ve(){return Ke()(fn,fn)}function Ze(t,n,e,i){var r=jt(t,n,e),s;switch(i=kn(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return i.precision==null&&!isNaN(s=me(r,a))&&(i.precision=s),wt(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=xe(r,Math.max(Math.abs(t),Math.abs(n))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=de(r))&&(i.precision=s-(i.type==="%")*2);break}}return pt(i)}function Je(t){var n=t.domain;return t.ticks=function(e){var i=n();return Lt(i[0],i[i.length-1],e??10)},t.tickFormat=function(e,i){var r=n();return Ze(r[0],r[r.length-1],e??10,i)},t.nice=function(e){e==null&&(e=10);var i=n(),r=0,s=i.length-1,a=i[r],o=i[s],l,f,u=10;for(o<a&&(f=a,a=o,o=f,f=r,r=s,s=f);u-- >0;){if(f=st(a,o,e),f===l)return i[r]=a,i[s]=o,n(i);if(f>0)a=Math.floor(a/f)*f,o=Math.ceil(o/f)*f;else if(f<0)a=Math.ceil(a*f)/f,o=Math.floor(o*f)/f;else break;l=f}return t},t}function Qe(){var t=Ve();return t.copy=function(){return Be(t,Qe())},Ue.apply(t,arguments),Je(t)}export{Ki as $,en as A,On as B,un as C,B as D,V as E,H as F,z as G,I as H,An as I,j as J,Nn as K,W as L,Y as M,Se as N,Bn as O,Kn as P,Ji as Q,D as R,fi as S,Re as T,Sn as U,Xi as V,Pn as W,er as X,rr as Y,ir as Z,ye as _,nt as a,Zi as a0,Yi as a1,Vi as a2,Ue as a3,Xe as a4,Je as a5,Be as a6,pt as a7,Ke as a8,fn as a9,xr as aA,yr as aB,Le as aC,vi as aD,Bt as aE,Kt as aF,Wt as aG,ht as aH,ne as aI,Mi as aJ,Qe as aK,Ze as aL,Ve as aa,tt as ab,pr as ac,ee as ad,_i as ae,_n as af,ei as ag,ii as ah,si as ai,ai as aj,oi as ak,yt as al,se as am,ge as an,wt as ao,ce as ap,kn as aq,Cn as ar,de as as,me as at,xe as au,tr as av,lr as aw,mr as ax,Jn as ay,Ge as az,Lt as b,Rt as c,Et as d,ri as e,$n as f,at as g,wn as h,hn as i,wi as j,Mn as k,Xt as l,ft as m,ti as n,Rn as o,gn as p,ut as q,qt as r,te as s,st as t,jt as u,sn as v,Un as w,bt as x,Bi as y,on as z};
